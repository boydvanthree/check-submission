<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
    }
    input, button {
      padding: 0.5rem;
      margin-top: 0.5rem;
      width: 100%;
    }
    #result {
      margin-top: 1.5rem;
      border-top: 1px solid #ccc;
      padding-top: 1rem;
    }
  </style>
</head>
<body>
  <h2>üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£</h2>
  <label>‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</label>
  <input type="email" id="email" placeholder="your@email.com" required />
  <label>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
  <input type="text" id="section" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å‡∏ä‡πá‡∏≠‡∏õ" />
  <button onclick="check()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>

  <div id="result"></div>

  <script>
    async function check() {
      const email = document.getElementById("email").value.trim();
      const section = document.getElementById("section").value.trim();
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...";

      try {
        const params = new URLSearchParams({ email, section });
        const res = await fetch(`https://adapted-liberal-rhino.ngrok-free.app/webhook/check-submission?${params}`);
        const data = await res.json();

        if (data.name) {
          resultDiv.innerHTML = `
            <h3>‚úÖ ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß</h3>
            <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${data.name}</p>
            <p><strong>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:</strong> ${data.org}</p>
            <p><strong>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</strong> ${data.province}</p>
            <p><strong>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:</strong> ${data.sectionName}</p>
          `;
        } else {
          resultDiv.innerHTML = `<p style="color:red;">‚ùå ${data.message || "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}</p>`;
        }
      } catch (err) {
        resultDiv.innerHTML = `<p style="color:red;">‚ö†Ô∏è ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</p>`;
      }
    }
  </script>
</body>
</html>
