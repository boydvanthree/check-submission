<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Check Submission</title>
</head>
<body>
  <h1>Check Your Workshop Submission</h1>

  <input type="email" id="emailInput" placeholder="Enter your email" />
  <button onclick="checkSubmission()">Check</button>

  <pre id="result"></pre>

  <script>
    async function checkSubmission() {
      const email = document.getElementById('emailInput').value;
      const resultEl = document.getElementById('result');

      if (!email) {
        resultEl.textContent = 'Please enter an email.';
        return;
      }

      const url = `https://set-maggot-indirectly.ngrok-free.app/webhook/check-submission?email=${encodeURIComponent(email)}`;
      
      try {
        const response = await fetch(url);
        const data = await response.json();
        const sessions = data.body.sessions;

        if (sessions && sessions.length) {
          resultEl.textContent = `Sessions found:\n- ${sessions.join('\n- ')}`;
        } else {
          resultEl.textContent = 'No sessions found for this email.';
        }
      } catch (error) {
        resultEl.textContent = 'Error fetching data.';
        console.error(error);
      }
    }
  </script>
</body>
</html>
